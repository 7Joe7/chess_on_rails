// JS Comment
var pieces = [
	<% @pieces.each_with_index do |p, i| -%>
		{
		"client_id": "<%= p.client_id %>",
		"img_name": "<%= ( (p.type.to_s.split("_").length==2) ? p.type.to_s.split("_")[1] : p.type.to_s) + '_' + p.side.to_s.slice(0,1) %>",
		"position": "<%= p.position %>",
		"side": "<%= p.side %>",
		"type": "<%= p.type %>",
		"allowed_moves": "<%= p.position + ' ' + ( p.allowed_moves(@board) * ' ' ) %>"
		}
		<%= "," if i<(@pieces.length-1) %>
	<% end %>
];

